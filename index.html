<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>iFrame test of SAM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="./jquery-3.2.1.min.js" type="application/javascript"></script>
  <script type="application/javascript">
    $(document).ready(function () {
      const $link = $('#selected-environment')
      const $frame = $('#sam-frame')
      const $environments = $('#environments')
      const $providers = $('#providers')
      let url = ''
      let selectedEnv
      let selectedProvider

      // env select
      $environments.change(function (e) {
        // get selected provider
        selectedProvider = $providers.find("option:selected").text()
        // concat url
        url = this.value + selectedProvider
        // set link href + text
        $link.attr('href', url)
        $link.html(url)
        // set iframe src
        $frame.attr('src', url)
      })

      // provider select
      const providerIds = Array.apply(null, { length: 200 }).map(Number.call, Number)
      providerIds.forEach((el, i) => {
        $('<option>').val(i + 1).text(i + 1).appendTo($providers)
      })
      $providers.change(function (e) {
        // concat url
        selectedEnv = $environments.find("option:selected").val()
        url = selectedEnv + this.value
        // set link href + text
        $link.attr('href', url)
        $link.html(url)
        // set iframe src
        $frame.attr('src', url)
      })

      // set iframe src on load
      selectedEnv = $environments.find("option:selected").val()
      selectedProvider = $providers.find("option:selected").text()
      url = selectedEnv + selectedProvider
      $frame.attr('src', url)
    })
  </script>
  <style>
    .root__header {
      margin: 0 auto 20px auto;
      text-align: center;
    }

    .root__title {
      font-size: 21px;
      margin: 30px 0 10px 0;
    }

    .root__subtitle {
      font-size: 16px;
      margin: 0 0 8px 0;
    }

    .root__information-title {
      font-size: 14px;
      margin: 12px 0 12px 0;
    }
  </style>
</head>

<body class="root">
  <div class="root__header">
    <h1 class="root__title">SAM - WebCalc IFrame Test Environment</h1>
    <h2 class="root__subtitle">Please pick a server and provider</h2>
    <select id="environments" class="root__selection">
      <option value="https://serviceagreement-dev.omnicar.io/">Dev</option>
      <option value="https://serviceagreement-staging.omnicar.io/">Staging</option>
      <option value="https://serviceagreement.omnicar.io/">Live</option>
      <option value="http://localhost:3000/">Dev Local</option>
    </select>
    <select id="providers" class="root__selection"></select>
    <div class="root__information">
      <h3 class="root__information-title">Current Environment</h3>
      <a id="selected-environment" target="none" href="https://serviceagreement-dev.omnicar.io/1">https://serviceagreement-dev.omnicar.io/1</a>
    </div>
  </div>

  <div class="root__body">
    <iframe id="sam-frame" width="100%" height="1900" allowtransparency="true" style="text-align: center; display: block; margin: 0 auto; border: 2px solid;"
      scrolling="yes" style="text-align: center; display: block; margin: 0 auto; padding: 0; border: none;" src="https://serviceagreement-dev.omnicar.io/1"></iframe>
  </div>
</body>

</html>